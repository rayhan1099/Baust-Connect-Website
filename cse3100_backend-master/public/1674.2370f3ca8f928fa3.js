"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1674],{1674:(G,m,d)=>{d.r(m),d.d(m,{AdminlistPageModule:()=>M});var s=d(9808),r=d(4182),o=d(2159),u=d(2281),n=d(1269),p=d(7501),c=d(8555),_=d(2313);function f(e,t){1&e&&(n.TgZ(0,"i"),n._uU(1,"\u2714"),n.qZA())}function A(e,t){1&e&&(n.TgZ(0,"i"),n._uU(1,"\u274c"),n.qZA())}function Z(e,t){if(1&e&&(n.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",8),n._uU(3),n.qZA(),n.TgZ(4,"ion-col",8),n._uU(5),n.YNc(6,f,2,0,"i",10),n.YNc(7,A,2,0,"i",10),n.qZA(),n.TgZ(8,"ion-col",8),n._uU(9),n.qZA(),n.TgZ(10,"ion-col",8)(11,"ion-buttons",11)(12,"ion-button",12),n._uU(13,"Activate|Deactivate"),n.qZA(),n.TgZ(14,"ion-button",13),n._uU(15,"Delete"),n.qZA(),n.TgZ(16,"ion-button",14),n._uU(17,"Edit"),n.qZA()()()()()),2&e){const l=t.$implicit;n.xp6(3),n.AsE(" ",l.full_name," (",l.uni_per_id,") "),n.xp6(2),n.hij(" ",l.email," "),n.xp6(1),n.Q6J("ngIf",null!=l.email_verified_at),n.xp6(1),n.Q6J("ngIf",null==l.email_verified_at),n.xp6(2),n.hij(" ",l.level," ")}}let h=(()=>{class e{constructor(l,i,a){this.adminService=l,this.loaderService=i,this.sanitizer=a,this.loadAdminList()}ngOnInit(){}loadAdminList(l=null){this.adminService.adminList(l).subscribe(i=>{i&&i.data&&(this.fullBody=i)})}getLabel(l){return l.replace(/&.*;/,"")}}return e.\u0275fac=function(l){return new(l||e)(n.Y36(p.l),n.Y36(c.D),n.Y36(_.H7))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-admin-list"]],decls:48,vars:11,consts:[["color","primary"],["slot","start"],["vertical","bottom","horizontal","end","slot",""],["color","primary","href","/admin/list/new"],["name","add-sharp","md","add-sharp","ios","add-outline"],["name","people","md","people-sharp","ios","people-outline"],[1,"ion-text-center","ion-color-tertiary",2,"color","darkgrey"],["fill","solid",3,"disabled","click"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ion-justify-content-center"],["fill","outline","color","primary"],["fill","outline","color","danger"],["fill","outline","color","tertiary"]],template:function(l,i){1&l&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n._UZ(3,"ion-menu-button"),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5,"admin list"),n.qZA()()(),n.TgZ(6,"ion-content")(7,"ion-grid")(8,"ion-row")(9,"ion-fab",2)(10,"ion-fab-button",3),n._UZ(11,"ion-icon",4),n.qZA()()(),n.TgZ(12,"ion-row")(13,"ion-col")(14,"ion-card")(15,"ion-card-content")(16,"h1"),n._UZ(17,"ion-icon",5),n._uU(18),n.qZA()()(),n.TgZ(19,"h2"),n._uU(20,"List of admins"),n.qZA(),n.TgZ(21,"ion-row")(22,"h4",6),n._uU(23),n.qZA(),n.TgZ(24,"ion-buttons")(25,"ion-button",7),n.NdJ("click",function(){return i.loadAdminList(null==i.fullBody?null:i.fullBody.links.first)}),n._uU(26,"First"),n.qZA(),n.TgZ(27,"ion-button",7),n.NdJ("click",function(){return i.loadAdminList(null==i.fullBody?null:i.fullBody.links.prev)}),n._uU(28,"Prev"),n.qZA(),n.TgZ(29,"ion-button",7),n.NdJ("click",function(){return i.loadAdminList(null==i.fullBody?null:i.fullBody.links.next)}),n._uU(30,"Next"),n.qZA(),n.TgZ(31,"ion-button",7),n.NdJ("click",function(){return i.loadAdminList(null==i.fullBody?null:i.fullBody.links.last)}),n._uU(32,"Last"),n.qZA()()(),n.TgZ(33,"ion-grid")(34,"ion-row")(35,"ion-col",8)(36,"b"),n._uU(37,"Name"),n.qZA()(),n.TgZ(38,"ion-col",8)(39,"b"),n._uU(40,"Email"),n.qZA()(),n.TgZ(41,"ion-col",8)(42,"b"),n._uU(43,"Permission level"),n.qZA()(),n.TgZ(44,"ion-col",8)(45,"b"),n._uU(46,"Actions"),n.qZA()()()(),n.YNc(47,Z,18,6,"ion-grid",9),n.qZA()()()()),2&l&&(n.xp6(18),n.hij(" ",null==i.fullBody?null:i.fullBody.data.length," admins "),n.xp6(5),n.xDo(" Page ",null==i.fullBody?null:i.fullBody.meta.current_page," of ",null==i.fullBody?null:i.fullBody.meta.last_page," | ",null==i.fullBody?null:i.fullBody.meta.per_page," per page | Showing ",null==i.fullBody?null:i.fullBody.meta.from,"-",null==i.fullBody?null:i.fullBody.meta.to," "),n.xp6(2),n.Q6J("disabled",null==(null==i.fullBody?null:i.fullBody.links.first)),n.xp6(2),n.Q6J("disabled",null==(null==i.fullBody?null:i.fullBody.links.prev)),n.xp6(2),n.Q6J("disabled",null==(null==i.fullBody?null:i.fullBody.links.next)),n.xp6(2),n.Q6J("disabled",null==(null==i.fullBody?null:i.fullBody.links.last)),n.xp6(16),n.Q6J("ngForOf",null==i.fullBody?null:i.fullBody.data))},directives:[o.Gu,o.sr,o.Sm,o.fG,o.wd,o.W2,o.jY,o.Nd,o.IJ,o.W4,o.gu,o.wI,o.PM,o.FN,o.YG,s.sg,s.O5],styles:[".table[_ngcontent-%COMP%]{border:1px solid grey}"]}),e})();var v=d(655),T=d(5148);function y(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Enter your full ID"),n.qZA())}function b(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"The input is invalid"),n.qZA())}function P(e,t){if(1&e&&(n.TgZ(0,"div",17),n.YNc(1,y,2,0,"span",18),n.YNc(2,b,2,0,"span",18),n.qZA()),2&e){const l=n.oxw();n.xp6(1),n.Q6J("ngIf",null==l.uni_per_id.errors?null:l.uni_per_id.errors.required),n.xp6(1),n.Q6J("ngIf",null==l.uni_per_id.errors?null:l.uni_per_id.errors.uni_per_id)}}function q(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Enter your full name"),n.qZA())}function w(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"The input is invalid"),n.qZA())}function U(e,t){if(1&e&&(n.TgZ(0,"div",17),n.YNc(1,q,2,0,"span",18),n.YNc(2,w,2,0,"span",18),n.qZA()),2&e){const l=n.oxw();n.xp6(1),n.Q6J("ngIf",null==l.full_name.errors?null:l.full_name.errors.required),n.xp6(1),n.Q6J("ngIf",null==l.full_name.errors?null:l.full_name.errors.full_name)}}function I(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Email address is required"),n.qZA())}function B(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"The email is invalid"),n.qZA())}function J(e,t){if(1&e&&(n.TgZ(0,"div",17),n.YNc(1,I,2,0,"span",18),n.YNc(2,B,2,0,"span",18),n.qZA()),2&e){const l=n.oxw();n.xp6(1),n.Q6J("ngIf",null==l.email.errors?null:l.email.errors.required),n.xp6(1),n.Q6J("ngIf",null==l.email.errors?null:l.email.errors.email)}}function N(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Password is required"),n.qZA())}function k(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Password needs to be 8 characters"),n.qZA())}function Y(e,t){if(1&e&&(n.TgZ(0,"div",17),n.YNc(1,N,2,0,"span",18),n.YNc(2,k,2,0,"span",18),n.qZA()),2&e){const l=n.oxw();n.xp6(1),n.Q6J("ngIf",null==l.password.errors?null:l.password.errors.required),n.xp6(1),n.Q6J("ngIf",null==l.password.errors?null:l.password.errors.minlength)}}function x(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Confirm Password is required"),n.qZA())}function Q(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Confirm password doesn't match"),n.qZA())}function C(e,t){if(1&e&&(n.TgZ(0,"div",17),n.YNc(1,x,2,0,"span",18),n._UZ(2,"br"),n.YNc(3,Q,2,0,"span",18),n.qZA()),2&e){const l=n.oxw();n.xp6(1),n.Q6J("ngIf",null==l.c_password.errors?null:l.c_password.errors.required),n.xp6(2),n.Q6J("ngIf",l.credentials.hasError("notSame"))}}const S=[{path:"",component:h},{path:"new",component:(()=>{class e{constructor(l,i,a,O,F,j){this.fb=l,this.adminService=i,this.alertController=a,this.departmentService=O,this.router=F,this.loaderService=j,this.credentials=new r.cw({}),this.force_disable=!1,this.checkPasswords=g=>g.get("password").value===g.get("c_password").value?null:{notSame:!0}}get uni_per_id(){return this.credentials.get("uni_per_id")}get email(){return this.credentials.get("email")}get password(){return this.credentials.get("password")}get full_name(){return this.credentials.get("full_name")}get level(){return this.credentials.get("level")}get c_password(){return this.credentials.get("c_password")}ngOnInit(){this.credentials=this.fb.group({uni_per_id:["",[r.kI.required,r.kI.minLength(9),r.kI.maxLength(9)]],email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.minLength(8)]],c_password:["",[r.kI.required,r.kI.minLength(8)]],full_name:["",[r.kI.required,r.kI.minLength(10),r.kI.maxLength(60)]],level:["",[r.kI.required,r.kI.minLength(1),r.kI.maxLength(2)]]},{validators:this.checkPasswords})}createAdmin(){return(0,v.mG)(this,void 0,void 0,function*(){this.force_disable=!0,this.adminService.adminCreate(this.credentials.value).subscribe(l=>{l&&"ok"==l.status&&(this.loaderService.showToast("Admin created successfully!","success"),this.router.navigateByUrl("/admin/list",{replaceUrl:!0}))},l=>{this.loaderService.showToast(l.error.message||"An error occured","danger",3e3)}),this.force_disable=!1})}}return e.\u0275fac=function(l){return new(l||e)(n.Y36(r.qu),n.Y36(p.l),n.Y36(o.Br),n.Y36(T.n),n.Y36(u.F0),n.Y36(c.D))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-add-admin"]],decls:42,vars:7,consts:[["color","primary"],["slot","start"],["size-lg","4","size-md","3","size-xs","12"],[1,""],["ion-text","",1,"white"],[3,"formGroup","ngSubmit"],[1,"input-group"],["formControlName","uni_per_id","placeholder","Personal ID","type","text"],["class","errors",4,"ngIf"],["formControlName","full_name","placeholder","Full Name","type","text"],["formControlName","level","name","level"],["value","S"],["value","M"],["formControlName","email","placeholder","Email","type","text"],["formControlName","password","placeholder","Password","type","password"],["formControlName","c_password","placeholder","Confirm Password","type","password"],["expand","block","type","submit",3,"disabled"],[1,"errors"],[4,"ngIf"]],template:function(l,i){1&l&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n._UZ(3,"ion-menu-button"),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5,"signup"),n.qZA()()(),n.TgZ(6,"ion-content")(7,"ion-grid")(8,"ion-row"),n._UZ(9,"ion-col",2),n.TgZ(10,"ion-col",3)(11,"h1",4),n._uU(12,"New Admin"),n.qZA(),n.TgZ(13,"p",4),n._uU(14,"Create new admin or mod. account"),n.qZA(),n.TgZ(15,"form",5),n.NdJ("ngSubmit",function(){return i.createAdmin()}),n.TgZ(16,"div",6)(17,"ion-item"),n._UZ(18,"ion-input",7),n.qZA(),n.YNc(19,P,3,2,"div",8),n.TgZ(20,"ion-item"),n._UZ(21,"ion-input",9),n.qZA(),n.YNc(22,U,3,2,"div",8),n.TgZ(23,"ion-item")(24,"ion-label"),n._uU(25,"Level"),n.qZA(),n.TgZ(26,"ion-select",10)(27,"ion-select-option",11),n._uU(28,"[S]uper Admin"),n.qZA(),n.TgZ(29,"ion-select-option",12),n._uU(30,"[M]oderator"),n.qZA()()(),n.TgZ(31,"ion-item"),n._UZ(32,"ion-input",13),n.qZA(),n.YNc(33,J,3,2,"div",8),n.TgZ(34,"ion-item"),n._UZ(35,"ion-input",14),n.qZA(),n.YNc(36,Y,3,2,"div",8),n.TgZ(37,"ion-item"),n._UZ(38,"ion-input",15),n.qZA(),n.YNc(39,C,4,2,"div",8),n.qZA(),n.TgZ(40,"ion-button",16),n._uU(41,"Create Admin"),n.qZA()()()()()()),2&l&&(n.xp6(15),n.Q6J("formGroup",i.credentials),n.xp6(4),n.Q6J("ngIf",(i.uni_per_id.dirty||i.uni_per_id.touched)&&i.uni_per_id.errors),n.xp6(3),n.Q6J("ngIf",(i.full_name.dirty||i.full_name.touched)&&i.full_name.errors),n.xp6(11),n.Q6J("ngIf",(i.email.dirty||i.email.touched)&&i.email.errors),n.xp6(3),n.Q6J("ngIf",(i.password.dirty||i.password.touched)&&i.password.errors),n.xp6(3),n.Q6J("ngIf",(i.c_password.dirty||i.c_password.touched)&&i.c_password.errors),n.xp6(1),n.Q6J("disabled",!i.credentials.valid||i.force_disable))},directives:[o.Gu,o.sr,o.Sm,o.fG,o.wd,o.W2,o.jY,o.Nd,o.wI,r._Y,r.JL,r.sg,o.Ie,o.pK,o.j9,r.JJ,r.u,s.O5,o.Q$,o.t9,o.QI,o.n0,o.YG],styles:["ion-content[_ngcontent-%COMP%]{--padding-top: 10%;--background: url(https://images.unsplash.com/photo-1536431311719-398b6704d4cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1234&q=80) 0 0/100% 100% no-repeat}form[_ngcontent-%COMP%]{max-width:400px;align-items:center}.input-group[_ngcontent-%COMP%]{background:#fff;border-radius:10px;overflow:hidden;margin-bottom:15px}.errors[_ngcontent-%COMP%]{font-size:small;color:#fff;background:var(--ion-color-danger);padding-left:15px;padding-top:5px;padding-bottom:5px}.white[_ngcontent-%COMP%]{color:#fff}"]}),e})()}];let L=(()=>{class e{}return e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[u.Bz.forChild(S)],u.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez,r.UX,r.u5,o.Pc,L]]}),e})()}}]);